$("#assign-search-form").html("<%= j (render 'assign/forms/search_form', search_type: @categorySearch, search_id: @category, search_category: @categoryName) %>")

var modalElement = document.querySelector('#assign-search-form');
var instance = M.Modal.init(modalElement, 
    {
        opacity: 0.9,
        onCloseEnd: () => {
            this.destroy();
        }
    }
);

instance.open();


$('#assign-search-form').on('click', '.remove_fields', function(event) {
    $(this).closest('.field').remove();
    //var modalElement = document.querySelector('.modal');
    //M.Modal.init(modalElement, {opacity: 0.9});
    return event.preventDefault();
});
$('#assign-search-form').on('click', ".add_fields", function(event){
//$('form').on('click', '.add_fields', function(event) {
    var regexp, time;
    time = new Date().getTime();
    regexp = new RegExp($(this).data('id'), 'g');
    $(this).before($(this).data('fields').replace(regexp, time));

    //var modalElement = document.querySelector('.modal');
    //M.Modal.init(modalElement, {opacity: 0.9});
    var selectElements = document.querySelectorAll('select');
    for (var i = 0; i < selectElements.length; i++){
        M.FormSelect.init(selectElements[i]);
    }

    return event.preventDefault();
});

var selectElements = document.querySelectorAll('select');
for (var i = 0; i < selectElements.length; i++){
    M.FormSelect.init(selectElements[i]);
}
